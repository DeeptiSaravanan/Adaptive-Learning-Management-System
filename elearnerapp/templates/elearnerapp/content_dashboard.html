<!DOCTYPE html>
<html lang="en">
{% load staticfiles %}

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
<!--   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script> -->

  <title>Dashboard</title>
  <meta content="" name="descriptison">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="{% static 'img/logo.jpg' %}" rel="icon">
  <link href="{% static 'img/logo.jpg' %}" rel="apple-touch-icon">


  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,600,600i,700,700i,900" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/icofont/icofont.min.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/boxicons/css/boxicons.min.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/animate.css/animate.min.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/venobox/venobox.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/aos/aos.css' %}" rel="stylesheet">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <!-- Template Main CSS File -->
  <link href="{% static 'css/style.css' %}" rel="stylesheet">

  <!-- =======================================================
  * Template Name: Mamba - v2.0.1
  * Template URL: https://bootstrapmade.com/mamba-one-page-bootstrap-template-free/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
  <style>  
      #boxes{
      content: "";
      display: table;
      clear: both;
      }
      #leftboxvid { 
                float:left;  
                /*background:#ffe6ff; */
                width:50%; 
                height:280px; 
            } 
            #rightboxvid{ 
                float:right; 
                /*background:#cce6ff; */
                width:50%; 
                height:280px; 
            } 
      #leftboxart { 
                float:left;  
                /*background:#ffe6ff; */
                width:80%; 
                height:70px; 
            } 
            #rightboxart{ 
                float:right; 
                /*background:#cce6ff; */
                width:20%; 
                height:70px; 
            } 
      #leftboxboo { 
                float:left;  
                /*background:#ffe6ff; */
                width:80%; 
                height:70px; 
            } 
            #rightboxboo{ 
                float:right; 
                /*background:#cce6ff; */
                width:20%; 
                height:70px; 
            } 
      #column1{ 
      background-color: #a1edcc; 
      } 
      #column2{ 
      background-color:#a0e9ed; 
      width:43%; 
      } 
      #column3{ 
      background-color:#f497f1; 
      } 
      h2{ 
      color: #000000; 
      text-align:center; 
      } 
      #icon-added-book a::before{
      padding-right: 10px;
      font-family: "FontAwesome";
      content: "\f02d";
    }
      #icon-added-article a::before{
      padding-right: 10px;
      font-family: "FontAwesome";
      content: "\f044";
    }
    </style>
    <script type="text/javascript">
$(document).on('ready', function(){
    $('#myModal').modal('show');
});
    </script>
</head>

  <!-- ======= Header ======= -->
  <header id="header">
    <div class="container">

      <div class="logo float-left">
        <h1 class="text-light"><a href="#"><span>Chiron</span></a></h1>
        <!-- Uncomment below if you prefer to use an image logo -->
        <!-- <a href="index.html"><img src="{% static 'img/logo.png" alt="" class="img-fluid"></a>-->
      </div>

      <nav class="nav-menu float-right d-none d-lg-block">
        <ul>
          <li class="active"><a href="#">Hi {{ username }} !<i class="la la-angle-down"></i></a></li>
          <!-- <li><a href="http://127.0.0.1:8000/elearner/{{ username }}/dashboard">Home</a></li> -->
          <li><a href="http://chironlearner.herokuapp.com/">Logout</a></li>
        </ul>
      </nav><!-- .nav-menu -->

    </div>
  </header><!-- End Header -->

  <!-- ======= Counts Section ======= -->
  <section class="counts section-bg">
    <div class="container">

      <div class="row">

        <div class="col-lg-3 col-md-6 text-center" data-aos="fade-up">
          <div class="count-box">
            <i class="icofont-simple-smile" style="color: #20b38e;"></i>
            <span data-toggle="counter-up">15</span>
            <p>Units</p>
          </div>
        </div>

        <div class="col-lg-3 col-md-6 text-center" data-aos="fade-up" data-aos-delay="200">
          <div class="count-box">
            <i class="icofont-document-folder" style="color: #c042ff;"></i>
            <span data-toggle="counter-up">70</span>
            <p>Free Reference Books!</p>
          </div>
        </div>

        <div class="col-lg-3 col-md-6 text-center" data-aos="fade-up" data-aos-delay="400">
          <div class="count-box">
            <i class="icofont-live-support" style="color: #46d1ff;"></i>
            <span data-toggle="counter-up">300</span>
            <p>Videos</p>
          </div>
        </div>

        <div class="col-lg-3 col-md-6 text-center" data-aos="fade-up" data-aos-delay="600">
          <div class="count-box">
            <i class="icofont-users-alt-5" style="color: #ffb459;"></i>
            <span data-toggle="counter-up">485</span>
            <p>Articles</p>
          </div>
        </div>

      </div>

    </div>
  </section><!-- End Counts Section -->


<!--   <section id="about" class="about">
    <div class="container">

      <div class="row no-gutters">

        <div class="col-lg-12 d-flex flex-column justify-content-center about-content">

          <div class="section-title">
            <h2>Instructions</h2>
            <ul>
            <li><p>Magnam dolores commodi suscipit. Necessitatibus eius consequatur ex aliquid fuga eum quidem. Sit sint consectetur velit. Quisquam quos quisquam cupiditate. Et nemo qui impedit suscipit alias ea.</p></li>
            <li><p>Magnam dolores commodi suscipit. Necessitatibus eius consequatur ex aliquid fuga eum quidem. Sit sint consectetur velit. Quisquam quos quisquam cupiditate. Et nemo qui impedit suscipit alias ea.</p></li>
            <li><p>Magnam dolores commodi suscipit. Necessitatibus eius consequatur ex aliquid fuga eum quidem. Sit sint consectetur velit. Quisquam quos quisquam cupiditate. Et nemo qui impedit suscipit alias ea.</p></li>
          </div>

        </div>
      </div>

    </div>
  </section> -->



      <!-- ======= Services Section ======= -->
    <section id="services" class="about">
      <div class="container">

        <div class="section-title">
          <h3>  </h3>
        </div>

        <div class="section-title">
          <h3>{{ full_sub }} - {{ unit }}</h3>
          <div class="progress">
              <div class="progress-bar bg-primary" role="progressbar" style="width: 35%" aria-valuenow="35" aria-valuemin="0" aria-valuemax="100"><span class="badge badge-primary">35%</span></div>
          </div>
        </div>

        <div class="section-title">
          <h3>  </h3>
        </div>

        <div class="row">
          <div class="col-12 col-md-8 icon-box">
            <h4 class="title"><a href="">Prescribed Text Book - </a></h4>
          </div>

          <div class="col-12 col-md-8 icon-box text-left">
              <div id="icon-added-book">
                {% if subject == "BM" %}
              <a href="#" style="color:black; font-size: 100%;" id="tb1">A Textbook on Principles of Management by R.S. Naagarazan (Author), Syed S. Ahamed (Author), New Age International Private Limited; Second edition (2020)</a>
              {% elif subject == "MM" %}
              <a href="#" style="color:black; font-size: 100%;">Marketing Management: Concepts, Cases, Challenges and Trends by Rajan (Author), Govinda (Author), Prentice Hall India Learning Private Limited; 2 edition (2007)</a>
              {% elif subject == "HR" %}
              <a href="#" style="color:black; font-size: 100%;">Human Resource Management: For Anna University by Pravin Durai (Author), Pearson Publications; (2011)</a>
              {% endif %}
            </div>
          </div>
          <div class="col-6 col-md-4 icon-box">
            <button type="button" class="btn btn-secondary btn-sm" onclick="CounterStart('tb1');"><span class="fa fa-play fa-lg" aria-hidden="true"></span></button>
            <button type="button" class="btn btn-info btn-sm" onclick="CounterPause();"><span class="fa fa-pause fa-lg" aria-hidden="true"></span></button>
            <button type="button" class="btn btn-danger btn-sm" onclick="CounterEnd('{{ subject }}',0.6,'{{ level }}','{{ username }}','{{ unit }}');"><span class="fa fa fa-check-square-o fa-lg" aria-hidden="true"></span></button>
          </div>


          <div class="col-12 col-md-8 icon-box ">
            <h4 class="title"><a href="">Reference Books- </a></h4>
          </div>

        {% for book in books.itertuples %}
          <div class="col-12 col-md-8 icon-box text-left">
                <div id="icon-added-book">
              <a href={{ book.Link }} style="color:black; font-size: 100%;">{{ book.Description }} by {{book.Author}}</a>
                </div>
          </div>

          <div class="col-6 col-md-4 icon-box">
            <button type="button" class="btn btn-secondary btn-sm" onclick="CounterStart();"><span class="fa fa-play fa-lg" aria-hidden="true"></span></button>
            <button type="button" class="btn btn-info btn-sm" onclick="CounterPause();"><span class="fa fa-pause fa-lg" aria-hidden="true"></span></button>
            <button type="button" class="btn btn-danger btn-sm" onclick="CounterEnd('{{ subject }}',0.6,'{{ level }}','{{ username }}','{{ unit }}');"><span class="fa fa fa-check-square-o fa-lg" aria-hidden="true"></span></button>
          </div>
          {% endfor %}


          <div class="col-12 col-md-8 icon-box">
            <h4 class="title"><a href="">Related Articles - </a></h4>
          </div>

          {% for key,value in articles.items %}
          <div class="col-12 col-md-8 icon-box text-left">
            <div id="icon-added-article">
            <a href={{ key }} style="color:black; font-size: 100%;">{{ value }}</a>
            </div>
          </div>

          <div class="col-6 col-md-4 icon-box">
            <button type="button" class="btn btn-secondary btn-sm" onclick="CounterStart();"><span class="fa fa-play fa-lg" aria-hidden="true"></span></button>
            <button type="button" class="btn btn-info btn-sm"  onclick="CounterPause();"><span class="fa fa-pause fa-lg" aria-hidden="true"></span></button>
            <button type="button" class="btn btn-danger btn-sm"  onclick="CounterEnd('{{ subject }}',0.3,'{{ level }}','{{ username }}','{{ unit }}');"><span class="fa fa fa-check-square-o fa-lg" aria-hidden="true"></span></button>
          </div>
          {% endfor %}

          <div class="col-12 col-md-8 icon-box">
            <h4 class="title"><a href="">Videos - </a></h4>
          </div>

          {% for link in videos %}
          <div class="col-12 col-md-8 icon-box">
            <iframe width="420" height="240" src={{ link }} allowfullscreen>
            </iframe>
          </div>

<!--           <div class="col-lg-6 video-box">
            <iframe src={{ link }}>
            </iframe>
          </div> -->

          <div class="col-6 col-md-4 icon-box">
            <button type="button" class="btn btn-secondary btn-sm" onclick="CounterStart();"><span class="fa fa-play fa-lg" aria-hidden="true"></span></button>
            <button type="button" class="btn btn-info btn-sm"  onclick="CounterPause();"><span class="fa fa-pause fa-lg" aria-hidden="true"></span></button>
            <button type="button" class="btn btn-danger btn-sm"  onclick="CounterEnd('{{ subject }}',0.1,'{{ level }}','{{ username }}','{{ unit }}');"><span class="fa fa fa-check-square-o fa-lg" aria-hidden="true"></span></button>
          </div>
          {% endfor %}

        </div>

      </div>
    </section><!-- End Services Section -->

  <!-- Modal -->
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog modal-sm">
      <div class="card border-light mb-3" style="max-width: 20rem;">
        <div class="card-header"><strong><i> Instructions</i></strong></div>
        <div class="card-body">
          <p class="card-text">
            <ul>
              <li> Once progress reaches 100% completion, you will be redirected to an evaluation page.</li>
              <li> You may choose any medium of learning to complete your quota. </li>
              <li> Remember to enable the timer for every material to register your progress!</li>
            </p>
          <button type="button" class="btn btn-primary pull-right">Proceed</button>
        </div>
      </div>
    </div>
  </div>

      <script>
              /*Stop Watch*/
              var i=1;
              function CounterStart(){
                if (confirm("Your learning duration for this material will be noted. Begin now?")) {
                interval=setInterval(function() {
                    i++;
                },1000);
                }                
              }
              function CounterPause(){
                if(confirm("This will pause the timer. Continue? (Press start to resume)")){
                console.log(i);
          window.clearInterval(interval);
        }
            }

            function CounterEnd(subject,mode,level,username,unit){
              var subject=subject;
              var mode=mode;
              var level=level;
              var username=username;
              var unit=unit;
              // var txt;
              if (confirm("Good job! You have completed this material in "+i/60+" minutes. Would you recommend this to a fellow learner?")) {
                score = 1;
              } else {
                score = -1;
              }

              $.ajax({
                type:"POST",
                url: "{% url 'write_to_csv' %}",
                data: {
                  'timer': i,
                  'subject':subject,
                  'mode':mode,
                  'level':level,
                  'score':score,
                  'username':username,
                  'unit':unit
                },
              }).done(function (data) {
                if (data.success) {
                    window.location.href = data.url;
                }    
                else {
                    window.location.href = data.url2;
                }
            });

              /*End*/
            }
          
      </script>
	<!-- password-script -->
	<script type="text/javascript">
		window.onload = function () {
			document.getElementById("password1").onchange = validatePassword;
			document.getElementById("password2").onchange = validatePassword;
		}

		function validatePassword() {
			var pass2 = document.getElementById("password2").value;
			var pass1 = document.getElementById("password1").value;
			if (pass1 != pass2)
				document.getElementById("password2").setCustomValidity("Passwords Don't Match");
			else
				document.getElementById("password2").setCustomValidity('');
			//empty string means no validation error
		}
	</script>

  <!-- Display the countdown timer in an element -->


	<!-- Vendor JS Files -->

	<script src="{% static 'vendor/jquery/jquery.min.js' %}"></script>
	<script src="{% static 'vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
	<script src="{% static 'vendor/jquery.easing/jquery.easing.min.js' %}"></script>
	<script src="{% static 'vendor/php-email-form/validate.js' %}"></script>
	<script src="{% static 'vendor/jquery-sticky/jquery.sticky.js' %}"></script>
	<script src="{% static 'vendor/venobox/venobox.min.js' %}"></script>
	<script src="{% static 'vendor/waypoints/jquery.waypoints.min.js' %}"></script>
	<script src="{% static 'vendor/counterup/counterup.min.js' %}"></script>
	<script src="{% static 'vendor/isotope-layout/isotope.pkgd.min.js' %}"></script>
	<script src="{% static 'vendor/aos/aos.js' %}"></script>

	<!-- Template Main JS File -->
	<script src="{% static 'js/main.js' %}"></script>
</body>

</html>